<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adaptive Traffic Signal Control System</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
        }

        header {
            background-color: #2d2d47;
            color: #fff;
            padding: 10px 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        header img {
            height: 50px;
            position: absolute;
            left: 20px;
        }

        header h1 {
            font-size: 30px;
            margin: 0;
            color: #f39c12;
        }

        .container {
            margin: 20px;
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }

        .upload-container {
            flex: 1;
            max-width: 22%;
            min-width: 200px;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .drop-area {
            border: 2px dashed #3498db;
            padding: 20px;
            text-align: center;
            background-color: #ecf0f1;
            border-radius: 8px;
            cursor: pointer;
            position: relative;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .drop-area p {
            color: #3498db;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .drop-area .plus-icon {
            font-size: 40px;
            color: #3498db;
            border: 2px dotted #3498db;
            border-radius: 50%;
            padding: 10px;
            background-color: #fff;
            margin-top: 10px;
        }

        .preview-container {
            margin-top: 10px;
        }

        .preview-container video {
            height: 150px;
            border-radius: 5px;
            border: 1px solid #ddd;
            max-width: 100%;
        }

        button {
            background-color: #28a745;
            color: #fff;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 5px;
            font-size: 16px;
            margin-top: 20px;
        }

        button:hover {
            background-color: #218838;
        }

        footer {
            background-color: #222;
            color: #fff;
            text-align: center;
            padding: 20px;
            margin-top: 20px;
        }

        footer p {
            margin: 0;
        }

        /* Background image styling */
        body {
            background: url('https://media.cnn.com/api/v1/images/stellar/prod/181018090834-traffic-light-stock.jpg?q=x_0,y_0,h_1688,w_2999,c_fill/h_833,w_1480') no-repeat center center fixed;
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            background-repeat: no-repeat;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            flex: 1;
        }

        footer {
            position: relative;
            bottom: 0;
            width: 100%;
            background-color: rgba(3, 0, 53, 0.4);
            color: #fff;
            text-align: center;
            padding: 20px;
        }
    </style>
</head>
<body>

<header>
    <h1>Adaptive Traffic Signal Control System</h1>
</header>

<form action="{{ url_for('upload_videos') }}" method="POST" enctype="multipart/form-data">
    <div class="container">
        <!-- Video Upload Block 1 -->
        <div class="upload-container">
            <h3>Upload Video 1</h3>
            <div class="drop-area" id="drop-area1">
                <p>Drag & Drop Video Here or Click to Choose</p>
                <div class="plus-icon">+</div>
                <input type="file" id="fileInput1" name="video1" accept="video/*" hidden>
            </div>
            <div class="preview-container" id="preview-container1"></div>
        </div>

        <!-- Video Upload Block 2 -->
        <div class="upload-container">
            <h3>Upload Video 2</h3>
            <div class="drop-area" id="drop-area2">
                <p>Drag & Drop Video Here or Click to Choose</p>
                <div class="plus-icon">+</div>
                <input type="file" id="fileInput2" name="video2" accept="video/*" hidden>
            </div>
            <div class="preview-container" id="preview-container2"></div>
        </div>

        <!-- Video Upload Block 3 -->
        <div class="upload-container">
            <h3>Upload Video 3</h3>
            <div class="drop-area" id="drop-area3">
                <p>Drag & Drop Video Here or Click to Choose</p>
                <div class="plus-icon">+</div>
                <input type="file" id="fileInput3" name="video3" accept="video/*" hidden>
            </div>
            <div class="preview-container" id="preview-container3"></div>
        </div>

        <!-- Video Upload Block 4 -->
        <div class="upload-container">
            <h3>Upload Video 4</h3>
            <div class="drop-area" id="drop-area4">
                <p>Drag & Drop Video Here or Click to Choose</p>
                <div class="plus-icon">+</div>
                <input type="file" id="fileInput4" name="video4" accept="video/*" hidden>
            </div>
            <div class="preview-container" id="preview-container4"></div>
        </div>
    </div>

    <div style="text-align: center;">
        <button type="submit">Analyze Traffic</button>
    </div>
</form>

<footer>
    <div class="bottom-data">
        <h3>Traffic-Related Problems</h3>
        <p>
            Traffic congestion continues to be a major problem in cities across the globe. The increase in urban populations
            and the growing number of vehicles are pushing infrastructure beyond its capacity. Modern adaptive traffic
            signal systems are designed to improve the efficiency of traffic management. Here are some key traffic-related issues:
        </p>
        <ul>
            <li><strong>Urban Congestion:</strong> Increased urbanization has resulted in longer travel times and higher fuel consumption.</li>
            <li><strong>Pollution:</strong> Traffic jams lead to more emissions, contributing to environmental pollution.</li>
            <li><strong>Accidents:</strong> Heavy traffic leads to more accidents, resulting in injuries and fatalities.</li>
            <li><strong>Increased Stress:</strong> Long hours spent in traffic increase driver stress and impact mental health.</li>
            <li><strong>Economic Impact:</strong> Traffic congestion leads to loss of productivity and increases operational costs.</li>
        </ul>
    </div>
    <p>&copy; 2025 Adaptive Traffic Signal Control System. All Rights Reserved.</p>
</footer>

<script>
    function setupDragDrop(dropAreaId, fileInputId, previewContainerId) {
        const dropArea = document.getElementById(dropAreaId);
        const fileInput = document.getElementById(fileInputId);
        const previewContainer = document.getElementById(previewContainerId);

        dropArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropArea.style.backgroundColor = "#d1f2eb";
        });

        dropArea.addEventListener('dragleave', () => {
            dropArea.style.backgroundColor = "#ecf0f1";
        });

        dropArea.addEventListener('drop', (e) => {
            e.preventDefault();
            dropArea.style.backgroundColor = "#ecf0f1";
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                handleFile(files[0], previewContainer);
            }
        });

        dropArea.addEventListener('click', () => {
            fileInput.click();
        });

        fileInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file && file.type.startsWith('video/')) {
                handleFile(file, previewContainer);
            }
        });
    }

    function handleFile(file, previewContainer) {
        previewContainer.innerHTML = "";
        const videoElement = document.createElement('video');
        videoElement.src = URL.createObjectURL(file);
        videoElement.controls = true;
        previewContainer.appendChild(videoElement);
    }

    setupDragDrop('drop-area1', 'fileInput1', 'preview-container1');
    setupDragDrop('drop-area2', 'fileInput2', 'preview-container2');
    setupDragDrop('drop-area3', 'fileInput3', 'preview-container3');
    setupDragDrop('drop-area4', 'fileInput4', 'preview-container4');
</script>

</body>
</html>
